<mat-list>
  <ng-container *ngFor="let item of menu">
    <!-- If the item doesn't have children show it as list item-->
    <ng-container *ngIf="item.subMenu === undefined">
      <mat-list-item
        *ngIf="item.title"
        [routerLink]="item.link"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <mat-icon [style.color]="item.color" mat-list-icon>
          {{ item.icon }}
        </mat-icon>
        <div mat-line>ITEM TITLE {{ item.title }}</div>
      </mat-list-item>
    </ng-container>

    <!-- If the item has subMenu show it as accordion-->
    <ng-container *ngIf="item?.subMenu && item?.subMenu?.length">
      <mat-accordion multi="true" displayMode="flat" class="wb-accordion">
        <mat-expansion-panel [expanded]="item?.expanded">
          <mat-expansion-panel-header style="height: 50px;">
            <mat-panel-title class="d-flex align-items-center">
              <mat-icon [style.color]="item.color" mat-list-icon>
                {{ item.icon }}
              </mat-icon>
              <span mat-line class="list-item">{{ item?.title }}</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <app-menu-item [menu]="item?.subMenu"></app-menu-item>
        </mat-expansion-panel>
        <mat-divider></mat-divider>
      </mat-accordion>
<!--      <mat-accordion displayMode="flat">-->
<!--        <mat-expansion-panel [expanded]="item?.expanded">-->
<!--          <mat-expansion-panel-header>-->
<!--            <mat-panel-title class="d-flex align-items-center">-->
<!--              <mat-icon [style.color]="item.color" mat-list-icon>-->
<!--                {{ item.icon }}-->
<!--              </mat-icon>-->
<!--              <span mat-line class="list-item">{{ item?.title }}</span>-->
<!--            </mat-panel-title>-->
<!--          </mat-expansion-panel-header>-->
<!--          <app-menu-item [menu]="item?.subMenu"></app-menu-item>-->
<!--        </mat-expansion-panel>-->
<!--      </mat-accordion>-->

    </ng-container>
  </ng-container>
</mat-list>
